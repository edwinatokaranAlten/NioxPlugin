<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="NioxBluetoothApp.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:NioxBluetoothApp"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="NIOX Bluetooth Scanner">

    <Grid Padding="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Title -->
        <TextBlock
            Grid.Row="0"
            Text="NIOX Bluetooth Device Scanner"
            FontSize="24"
            FontWeight="Bold"
            Margin="0,0,0,20"/>

        <!-- Bluetooth Status -->
        <StackPanel
            Grid.Row="1"
            Orientation="Horizontal"
            Spacing="10"
            Margin="0,0,0,20">
            <TextBlock
                Text="Bluetooth Status:"
                FontSize="16"
                VerticalAlignment="Center"/>
            <TextBlock
                x:Name="BluetoothStatusText"
                Text="Checking..."
                FontSize="16"
                FontWeight="SemiBold"
                Foreground="Gray"
                VerticalAlignment="Center"/>
        </StackPanel>

        <!-- Scan Controls -->
        <StackPanel
            Grid.Row="2"
            Orientation="Horizontal"
            Spacing="10"
            Margin="0,0,0,20">
            <Button
                x:Name="ScanButton"
                Content="Scan for Devices"
                Click="ScanButton_Click"
                MinWidth="150"
                Background="#0078D4"
                Foreground="White"/>
            <Button
                x:Name="RefreshStatusButton"
                Content="Refresh Status"
                Click="RefreshStatusButton_Click"
                MinWidth="150"/>
            <Button
                x:Name="DiagnosticsButton"
                Content="Run DLL Diagnostics"
                Click="DiagnosticsButton_Click"
                MinWidth="150"
                Background="#E81123"
                Foreground="White"/>
            <CheckBox
                x:Name="NioxOnlyCheckBox"
                Content="NIOX Devices Only"
                IsChecked="True"
                VerticalAlignment="Center"/>
        </StackPanel>

        <!-- Device List -->
        <Grid Grid.Row="3">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <TextBlock
                Grid.Row="0"
                Text="Discovered Devices:"
                FontSize="16"
                FontWeight="SemiBold"
                Margin="0,0,0,10"/>

            <ListView
                x:Name="DeviceListView"
                Grid.Row="1"
                SelectionMode="Single"
                Background="#F5F5F5">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Padding="10" Spacing="5">
                            <TextBlock
                                Text="{Binding Name}"
                                FontSize="16"
                                FontWeight="SemiBold"/>
                            <StackPanel Orientation="Horizontal" Spacing="15">
                                <TextBlock
                                    Text="{Binding Address}"
                                    Foreground="Gray"/>
                                <TextBlock
                                    Text="NIOX Device"
                                    Foreground="Green"
                                    FontWeight="SemiBold"/>
                            </StackPanel>
                            <TextBlock
                                Text="{Binding SerialNumber}"
                                Foreground="Blue"
                                FontSize="12"/>
                        </StackPanel>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Grid>

        <!-- Status Bar -->
        <Border
            Grid.Row="4"
            Background="#E8E8E8"
            CornerRadius="4"
            Padding="15,10"
            Margin="0,20,0,0">
            <TextBlock
                x:Name="StatusBarText"
                Text="Ready"
                FontSize="14"/>
        </Border>
    </Grid>
</Window>